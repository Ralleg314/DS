
@startuml

legend top 
    DS1 Registrar Usuari
end legend

actor Usuari_No_Registrat as usuari
activate usuari

participant ":Menu" as menu
participant ":TotSeries" as TS
participant ":Dades" as dades
participant ":Usuari_registrat" as us 

usuari -> menu
activate menu
menu -> menu: op=llegeixInt()
opt op==1
    |||
    menu -> menu: nom=llegeixString(nom)
    menu -> menu: nom=llegeixString(id)
    menu -> menu: nacionalitat=llegeixString(nacionalitat)
    menu -> menu: password=llegeixString(password)
    menu -> menu: naixement=llegeixDateSistema()
    menu -> TS: registrarUsuari(nom,id, nacionalitat, naixament, password)
    activate TS
    
    TS -> dades : existeixUsuari(id)
    dades ---> TS : existeix
    
    
    
    opt existeix == False
    
    TS -> dades : registrarUsuari(nom,id, nacionalitat, naixament, password)
    activate dades
    dades -> us : usuari_registrat(nom,id, nacionalitat, naixament, password)
    activate us
    us ---> dades : Usuari_registrat
    deactivate us
    dades ---> TS
    deactivate dades
    TS ---> menu
    deactivate TS
    menu ---> usuari
    
    else
    
    activate TS
    TS ---> menu
    deactivate TS
    menu -> menu : escriu("L'usuari ja existeix")
    menu ---> usuari
    deactivate menu
    deactivate usuari
    end
    |||
end
@enduml

