
@startuml

legend top 
    DS1 Registrar Usuari
end legend

actor Usuari_No_Registrat as usuari
activate usuari

participant ":TotSeries" as TS
participant "us:Usuari" as us
participant ":Vista" as menu

usuari -> TS: ID= intentaRegistrar(nom)
note right
    ID: String
    exiteix: boolean
end note
activate TS

loop (us in lst_usuari) and (not existeix)
TS -> us: existeix:= existeixUsuari(ID):boolean
activate us
us -> us: check ID == my_ID
us --> TS: check
deactivate us
end

opt existeix = false
note over TS
    nom: String
    password: String
    nacionalitat: String
    naixement: Date
end note

TS -> us: create
activate us
us -> menu: escriu(s:String): nom, nacionalitat, password
activate menu


menu -> menu: nom=llegeixString(nom)
menu -> menu: nacionalitat=llegeixString(nacionalitat)
menu -> menu: password=llegeixString(password)
menu -> menu: naixement=llegeixDateSistema()
menu --> us
deactivate menu

TS <- us: registrarUsuari(nom,nacionalitat,naixement,password)
us --> TS: Registre finalitzat
deactivate us
TS --> usuari: Registrat

else existeix = true 

TS --> usuari: Err: Already registered
deactivate TS
deactivate usuari
end

@enduml

